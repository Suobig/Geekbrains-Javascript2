# Введение в AJAX и COMET
## Что такое AJAX
AJAX - технология обращения к серверу без перезагрузки страницы.
За счет этого по интерактивности веб-приложение начинает напоминать десктоп
# Что можно делать с помощью AJAX
* Элементы интерфейса
* Динамическая подгрузка страницы
* Живой поиск
* Технически - можно обмениваться любыми данными с сервером
## Что такое COMET
COMET - общий термин, описывающий различные техники получения данных по инциативе сервера.

Можно сказать, что эт непрерывный канал с сервером
Примеры COMET-приложений:
* чат
* акуцион с онлайн обновлением ставок
* интерфейс совместного редактирования документов

На текущий момент COMET удобно реализуется в любых браузерах.

В данной статье технологии будут использоваться на низком уровне, хотя есть библиотеки и фреймворки для более высокоуровневого использования:
* Socket.io
* CometD
* etc.

## Основы XMLHttpRequest
### Основные методы:

#### 1. Настроить: open
Синтаксис: 

    xhr.open(method, URL, async, user, password);
* **method** - HTTP-метод. Как правило GET или POST
* **URL** - Адрес запроса. Может быть как http:// так и ftp:// и file://. При этом есть ограничение безопасности Same Origin Policy (SOP) - страница может отправлять запросы можно отправлять только она тот же *протокол://домен:порт* с которого она пришла.
* **async** - если установлено в *false*, то запрос происходит синхронно, если *true* - асинхронно.
* **user**, **password** - логин и пароль для HTTP авторизации, если надо.

#### 2. Отослать данные: send
Синтаксис:

    xhr.send([body]);

Именно этот метод открывает соединение и отправляет запрос на сервер. 
В **body** может находиться тело запроса. Тело есть не у всех запросов, например, у GET запроса нет тела, а вот у POST основные данные передаются именно через body.

#### 3. Отмена: abort
Вызов 

    xhr.abort();

приведет к прерыванию выполнения запроса.

#### 4. Ответ: status, statusText, responseText

**xhr.status**  - код ответа: 202, 404, 403 и т.д. Может быть равен 0, если сервер не ответил или при попытке запроса на другой домен.

**xhr.statusText** - Текстовое описание статуса от сервера: OK, Not Found, Forbidden и т.д.

**responseText** - Текст ответа от сервера

**responseXML** - если сервер вернул XML документ, снабдив его корректным заголовком Content-type: text/xml, то браузер создаст из него XML-документ. По нему можно будет делать запросы через querySelector и т.д. Используется редко, т.к. сервер обычно возвращает JSON а не XML.

### Синхронные и асинхронные запросы

Если в методе open параметр async установлен равным false, то запрос будет синхронным. 

Синхронные запросы используются крайне редко, так как блокируют работу со страницей до окончания загрузки данных по запросу. Если синхронный запрос занимает слишком много времени, браузер предложит закрыть "зависшую" страницу. 

Кроме того, ряд возможностей, такие как  возможность делать запросы на другой домен или указывать таймаут, в синхронном режиме работать не будут. 